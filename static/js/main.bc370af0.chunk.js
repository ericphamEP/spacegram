(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{170:function(e,t,a){},190:function(e,t,a){},265:function(e,t,a){"use strict";a.r(t);var i,r,n,s,o,c,u,l=a(0),h=a.n(l),p=a(24),g=a.n(p),m=(a(170),a(20)),d=a.n(m),j=a(30),f=a(25),b=a(26),O=a(19),v=a(162),k=a(120),x=a(119),I=a.n(x),y=function(){function e(){Object(f.a)(this,e),this.root="https://images-api.nasa.gov"}return Object(b.a)(e,[{key:"getImages",value:function(){var e=Object(j.a)(d.a.mark((function e(t,a,i,r){var n,s,o,c,u=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(k.a)({q:t,page:i,nasa_id:r,media_type:"image"},a),e.next=3,I.a.get("".concat(this.root,"/search"),{params:n});case 3:return s=e.sent,o=s.data.collection.metadata.total_hits,c=s.data.collection.items.map((function(e){return u._mapResponseDataToFormattedData(e)})),e.abrupt("return",{images:c,totalImagesCount:o});case 7:case"end":return e.stop()}}),e,this)})));return function(t,a,i,r){return e.apply(this,arguments)}}()},{key:"getImagesFromIds",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var a,i,r,n,s,o,c=this;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[],i=Object(v.a)(t),e.prev=2,i.s();case 4:if((r=i.n()).done){e.next=13;break}return n=r.value,s={nasa_id:n,media_type:"image"},e.next=9,I.a.get("".concat(this.root,"/search"),{params:s});case 9:o=e.sent,a=a.concat(o.data.collection.items.map((function(e){return c._mapResponseDataToFormattedData(e)})));case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),i.e(e.t0);case 18:return e.prev=18,i.f(),e.finish(18);case 21:return e.abrupt("return",{images:a,totalImagesCount:a.length});case 22:case"end":return e.stop()}}),e,this,[[2,15,18,21]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getImageDetails",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.a.get("".concat(this.root,"/search"),{params:{nasa_id:t}});case 2:return a=e.sent,e.abrupt("return",this._mapResponseDataToFormattedDataFull(a.data.collection.items[0]));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_mapResponseDataToFormattedData",value:function(e){return{id:e.data[0].nasa_id,title:e.data[0].title,imgUrl:e.links[0].href,date:e.data[0].date_created,description:e.data[0].description}}},{key:"_mapResponseDataToFormattedDataFull",value:function(e){return{image:Object(k.a)(Object(k.a)({},this._mapResponseDataToFormattedData(e)),{},{location:e.data[0].location,center:e.data[0].center,keywords:e.data[0].keywords})}}}]),e}(),S=a(165),L=function(){function e(){Object(f.a)(this,e),this.queryService=new y}return Object(b.a)(e,[{key:"getImagesSearch",value:function(){var e=Object(j.a)(d.a.mark((function e(t,a,i,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={images:[],totalImagesCount:0},e.prev=1,e.next=4,this.queryService.getImages(t,a,i,r);case 4:n=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this._showError("Could not fetch images for search",e.t0);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t,a,i,r){return e.apply(this,arguments)}}()},{key:"getImagesFromIds",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={images:[],totalImagesCount:0},e.prev=1,e.next=4,this.queryService.getImagesFromIds(t);case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this._showError("Could not fetch for group of images",e.t0);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getImageDetails",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={image:void 0},e.prev=1,e.next=4,this.queryService.getImageDetails(t);case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),this._showError("Could not fetch image details",e.t0);case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_showError",value:function(e,t){S.a.error({message:"Image Service Error",description:e}),console.log("[image-service-error] ".concat(t))}}]),e}(),w=function(){function e(){var t=this;Object(f.a)(this,e),this.imageService=new L,this.imagesList=[],this.totalImagesCount=0,this.imageDetails={image:void 0},this.likedImages={},this.likedImagesList=[],this.onLike=function(){var e=Object(j.a)(d.a.mark((function e(a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a in t.likedImages?delete t.likedImages[a]:t.likedImages[a]=!0,localStorage.setItem("likedImages",JSON.stringify(t.likedImages)),e.next=4,t.fetchLikedImages();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.setImagesList=function(e){t.imagesList=e},this.setTotalImagesCount=function(e){t.totalImagesCount=e},this.setLikedImagesList=function(e){t.likedImagesList=e},this.setImageDetails=function(e){t.imageDetails=e},Object(O.l)(this);try{var a=localStorage.getItem("likedImages");this.likedImages=a?JSON.parse(a):{}}catch(i){this.likedImages={}}}return Object(b.a)(e,[{key:"fetchImagesSearch",value:function(){var e=Object(j.a)(d.a.mark((function e(t,a,i,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.imageService.getImagesSearch(t,a,i,r);case 2:n=e.sent,this.setImagesList(n.images),this.setTotalImagesCount(n.totalImagesCount);case 5:case"end":return e.stop()}}),e,this)})));return function(t,a,i,r){return e.apply(this,arguments)}}()},{key:"fetchLikedImages",value:function(){var e=Object(j.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.imageService.getImagesFromIds(Object.keys(this.likedImages));case 2:t=e.sent,this.setLikedImagesList(t.images);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchImageDetails",value:function(){var e=Object(j.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.imageService.getImageDetails(t);case 2:a=e.sent,this.setImageDetails(a);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),D=function(){function e(t){var a=this;Object(f.a)(this,e),this.imageStore=void 0,this.currentSearch="",this.filters={},this.page=1,this.isLoading=!1,this.isLikeLoading=!1,this.isDetailsLoading=!1,this.isDetailsOpen=!1,this.isListView=!1,this.loadImageDetails=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setIsDetailsLoading(!0),a.setIsDetailsOpen(!0),e.next=4,a.imageStore.fetchImageDetails(t);case 4:a.setIsDetailsLoading(!1);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(O.l)(this),this.imageStore=t}return Object(b.a)(e,[{key:"getSearch",value:function(){return this.currentSearch}},{key:"setSearch",value:function(e){this.currentSearch=e,this.setPage(1)}},{key:"getIsLoading",value:function(){return this.isLoading}},{key:"setIsLoading",value:function(e){this.isLoading=e}},{key:"getIsLikeLoading",value:function(){return this.isLikeLoading}},{key:"setIsLikeLoading",value:function(e){this.isLikeLoading=e}},{key:"getIsDetailsLoading",value:function(){return this.isDetailsLoading}},{key:"setIsDetailsLoading",value:function(e){this.isDetailsLoading=e}},{key:"getIsDetailsOpen",value:function(){return this.isDetailsOpen}},{key:"setIsDetailsOpen",value:function(e){this.isDetailsOpen=e}},{key:"getIsListView",value:function(){return this.isListView}},{key:"setIsListView",value:function(e){this.isListView=e}},{key:"getPage",value:function(){return this.page}},{key:"setPage",value:function(e){this.page=e}},{key:"resetImageDetails",value:function(){this.imageStore.setImageDetails({image:void 0})}},{key:"loadSearchResults",value:function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setIsLoading(!0),e.next=3,this.imageStore.fetchImagesSearch(this.currentSearch,this.filters,this.page);case 3:this.setIsLoading(!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadLikedImages",value:function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setIsLikeLoading(!0),e.next=3,this.imageStore.fetchLikedImages();case 3:this.setIsLikeLoading(!1);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),C=a(275),U=a(271),F=a(276),T=a(274),_=(a(190),a(35)),P=a(34),A=a(40),M=a(81),Y=a(156),R=a(50),z=a(270),V=a(76),E=a.n(V),N=a(280),B=a(284),q=a(283),J=a(7),W=z.a.Meta,H=U.a.Paragraph,K=function(e){Object(_.a)(a,e);var t=Object(P.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return Object(J.jsx)(z.a,{hoverable:!0,size:"small",style:{height:500,margin:10,overflow:"hidden"},cover:Object(J.jsx)("div",{style:{overflow:"hidden",height:"280px"},children:Object(J.jsx)("img",{style:{height:"100%",display:"block",marginLeft:"auto",marginRight:"auto"},alt:this.props.image.id,src:this.props.image.imgUrl})}),actions:[Object(J.jsx)(N.a,{onClick:function(){return e.props.onDetail(e.props.image.id)}},"details"),this.props.liked?Object(J.jsx)(B.a,{onClick:function(){return e.props.onLike(e.props.image.id)}}):Object(J.jsx)(q.a,{onClick:function(){return e.props.onLike(e.props.image.id)}})],children:Object(J.jsx)(W,{title:this.props.image.title,description:Object(J.jsxs)(h.a.Fragment,{children:[Object(J.jsx)(H,{ellipsis:{rows:1},children:E()(this.props.image.date).format("MMM D YYYY, h:mm:ss a")}),Object(J.jsx)(H,{ellipsis:{rows:3},children:this.props.image.description})]})})})}}]),a}(h.a.Component),Q=Object(A.a)(i=function(e){Object(_.a)(a,e);var t=Object(P.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return Object(J.jsx)(M.a,{gutter:16,children:this.props.imageStore.imagesList.map((function(t){return Object(J.jsx)(R.a,{span:6,children:Object(J.jsx)(K,{image:t,onDetail:e.props.imageUiStore.loadImageDetails,onLike:e.props.imageStore.onLike,liked:e.props.imageStore.likedImages[t.id]})},t.id)}))})}}]),a}(h.a.Component))||i,G=a(285),X=G.b.Item,Z=U.a.Paragraph,$=Object(A.a)(r=function(e){Object(_.a)(a,e);var t=Object(P.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return Object(J.jsxs)(X,{actions:[Object(J.jsx)(N.a,{onClick:function(){return e.props.onDetail(e.props.image.id)}},"details"),this.props.liked?Object(J.jsx)(B.a,{onClick:function(){return e.props.onLike(e.props.image.id)}}):Object(J.jsx)(q.a,{onClick:function(){return e.props.onLike(e.props.image.id)}})],extra:Object(J.jsx)("img",{width:350,alt:this.props.image.id,src:this.props.image.imgUrl}),children:[Object(J.jsx)(X.Meta,{title:this.props.image.title,description:E()(this.props.image.date).format("MMM D YYYY, h:mm:ss a")}),Object(J.jsx)(Z,{ellipsis:{rows:3},children:this.props.image.description})]},this.props.image.id)}}]),a}(h.a.Component))||r,ee=Object(A.a)(n=function(e){Object(_.a)(a,e);var t=Object(P.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"render",value:function(){var e=this;return Object(J.jsx)(G.b,{itemLayout:"vertical",size:"large",bordered:!0,style:{padding:70,backgroundColor:"white"},children:this.props.imageStore.imagesList.map((function(t){return Object(J.jsx)($,{image:t,onDetail:e.props.imageUiStore.loadImageDetails,onLike:e.props.imageStore.onLike,liked:e.props.imageStore.likedImages[t.id]},t.id)}))})}}]),a}(h.a.Component))||n,te=U.a.Title,ae=Object(A.a)(s=function(e){Object(_.a)(a,e);var t=Object(P.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.imageUiStore.loadSearchResults();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(J.jsx)(M.a,{gutter:8,children:this.props.imageUiStore.getIsLoading()?Object(J.jsx)(Y.a,{size:"large"}):this.props.imageStore.imagesList.length<=0?Object(J.jsx)(R.a,{span:8,children:Object(J.jsx)(te,{level:2,children:"No results :("})}):this.props.imageUiStore.getIsListView()?Object(J.jsx)(ee,{imageStore:this.props.imageStore,imageUiStore:this.props.imageUiStore}):Object(J.jsx)(Q,{imageStore:this.props.imageStore,imageUiStore:this.props.imageUiStore})})}}]),a}(h.a.Component))||s,ie=a(158),re=a(278),ne=a(282),se=a(281),oe=Object(A.a)(o=function(e){Object(_.a)(a,e);var t=Object(P.a)(a);function a(){var e;Object(f.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).showTotalAssets=function(e,t){return"".concat(t[0],"-").concat(t[1]," of ").concat(e," items")},e.onPageChange=function(t){e.props.imageUiStore.setPage(t),e.props.imageUiStore.loadSearchResults()},e.onViewChange=function(t){e.props.imageUiStore.setIsListView(!t)},e}return Object(b.a)(a,[{key:"render",value:function(){var e=this.props.imageUiStore.getPage();return Object(J.jsxs)(M.a,{children:[Object(J.jsx)(R.a,{span:8,children:Object(J.jsx)(ie.a,{size:"small",total:this.props.imageStore.totalImagesCount>1e3?1e3:this.props.imageStore.totalImagesCount,current:e,showTotal:this.showTotalAssets,pageSize:100,showQuickJumper:!0,showSizeChanger:!1,onChange:this.onPageChange,style:{paddingBottom:20}})}),Object(J.jsx)(R.a,{span:8,offset:8,style:{textAlign:"right"},children:Object(J.jsx)(re.a,{checkedChildren:Object(J.jsx)(ne.a,{}),unCheckedChildren:Object(J.jsx)(se.a,{}),onChange:this.onViewChange,defaultChecked:!0})})]})}}]),a}(h.a.Component))||o,ce=U.a.Text,ue=G.b.Item,le=Object(A.a)(c=function(e){Object(_.a)(a,e);var t=Object(P.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.imageUiStore.loadLikedImages();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(J.jsx)(G.b,{grid:{gutter:16,xs:1,sm:2,md:4,lg:4,xl:6,xxl:3},dataSource:this.props.imageStore.likedImagesList,renderItem:function(t){return Object(J.jsx)(ue,{children:Object(J.jsx)(K,{image:t,onDetail:e.props.imageUiStore.loadImageDetails,onLike:e.props.imageStore.onLike,liked:e.props.imageStore.likedImages[t.id]})},t.id)},children:this.props.imageUiStore.getIsLikeLoading()?Object(J.jsx)(Y.a,{size:"large"}):this.props.imageStore.likedImagesList.length<=0?Object(J.jsx)(R.a,{span:8,children:Object(J.jsx)(ce,{children:"No liked images to display"})}):null})}}]),a}(h.a.Component))||c,he=a(277),pe=a(273),ge=a(272),me=a(269),de=a(279),je=U.a.Text,fe=he.b.Item,be=Object(A.a)(u=function(e){Object(_.a)(a,e);var t=Object(P.a)(a);function a(){var e;Object(f.a)(this,a);for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return(e=t.call.apply(t,[this].concat(r))).handleClose=function(){e.props.imageUiStore.setIsDetailsOpen(!1),e.props.imageUiStore.resetImageDetails()},e}return Object(b.a)(a,[{key:"render",value:function(){var e,t=this.props.imageStore.imageDetails.image,a=this.props.imageUiStore.getIsDetailsOpen(),i=this.props.imageUiStore.getIsDetailsLoading();return Object(J.jsx)(pe.a,{title:t?t.title:"Details",visible:a,onOk:this.handleClose,onCancel:this.handleClose,footer:null,style:{minWidth:1e3},children:Object(J.jsx)("div",{style:{margin:20},children:i?Object(J.jsx)(Y.a,{size:"large"}):t?Object(J.jsxs)(h.a.Fragment,{children:[Object(J.jsx)("div",{style:{textAlign:"center"},children:Object(J.jsx)(ge.a,{src:t.imgUrl})}),Object(J.jsxs)(he.b,{bordered:!0,style:{padding:50},children:[Object(J.jsx)(fe,{label:"Date Created",children:E()(t.date).format("MMM D YYYY, h:mm:ss a")}),Object(J.jsx)(fe,{label:"Center",children:t.center}),Object(J.jsx)(fe,{label:"Location",children:t.location})]}),Object(J.jsx)(je,{children:t.description}),Object(J.jsx)(me.a,{}),null===(e=t.keywords)||void 0===e?void 0:e.map((function(e){return Object(J.jsx)(de.a,{children:e.toLowerCase()},e.toLowerCase())}))]}):"No image selected"})})}}]),a}(h.a.Component))||u,Oe=C.a.Header,ve=C.a.Content,ke=C.a.Footer,xe=U.a.Title,Ie=F.a.Search,ye=T.a.Panel,Se=new w,Le=new D(Se);var we=function(){var e=function(e){Le.setSearch(e),Le.loadSearchResults()};return Object(J.jsxs)(C.a,{style:{minHeight:"100vh"},children:[Object(J.jsx)(Oe,{children:Object(J.jsx)(xe,{style:{paddingTop:5,color:"white"},onClick:function(){e("")},children:"Spacegram: Unofficial NASA Photobook"})}),Object(J.jsxs)(ve,{style:{margin:50,minWidth:1e3},children:[Object(J.jsx)(T.a,{defaultActiveKey:["1"],style:{marginBottom:20},children:Object(J.jsx)(ye,{header:"Liked Images",children:Object(J.jsx)(le,{imageStore:Se,imageUiStore:Le})},"1")}),Object(J.jsx)(Ie,{style:{paddingBottom:30},placeholder:"Search images",onSearch:e,enterButton:!0,size:"large"}),Object(J.jsx)(oe,{imageStore:Se,imageUiStore:Le}),Object(J.jsx)(ae,{imageStore:Se,imageUiStore:Le}),Object(J.jsx)(be,{imageStore:Se,imageUiStore:Le})]}),Object(J.jsx)(ke,{style:{textAlign:"center"},children:"Created by Eric Pham for Shopify's Front End Developer Intern Challenge - Winter 2022. Utilizes the NASA Image and Video Library API (images.nasa.gov API) for search results."})]})},De=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,286)).then((function(t){var a=t.getCLS,i=t.getFID,r=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),i(e),r(e),n(e),s(e)}))};g.a.render(Object(J.jsx)(h.a.StrictMode,{children:Object(J.jsx)(we,{})}),document.getElementById("root")),De()}},[[265,1,2]]]);
//# sourceMappingURL=main.bc370af0.chunk.js.map